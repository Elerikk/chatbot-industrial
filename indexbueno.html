<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>ChatBot IngenierÃ­a Civil Industrial</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f2f2f2;
      padding: 20px;
    }
    #chatbox {
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 10px;
      padding: 15px;
      max-width: 500px;
      height: 400px;
      overflow-y: auto;
      white-space: pre-line;
    }
    .buttons-container {
      margin-top: 10px;
    }
    .option-btn {
      padding: 10px 20px;
      margin: 5px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      background-color: #007bff;
      color: white;
    }
    #manualInput {
      margin-top: 10px;
    }
    #manualInput input {
      padding: 10px;
      font-size: 16px;
      width: 300px;
    }
    #manualInput button {
      padding: 10px;
      font-size: 16px;
      margin-left: 10px;
    }
    img.qr {
      margin-top: 10px;
      width: 150px;
    }
  </style>
</head>
<body>

<h2>Bienvenido al ChatBot de IngenierÃ­a Civil Industrial ğŸ‘·â€â™‚ï¸</h2>
<div id="chatbox">Â¿En quÃ© te puedo ayudar?
1. InformaciÃ³n general de la carrera  
2. Preguntas Frecuentes (FAQ)  
3. Otros  
4. Salir</div>

<div class="buttons-container" id="buttonsContainer"></div>

<div id="manualInput">
  <input type="text" id="userInput" placeholder="Escribe el nÃºmero de opciÃ³n aquÃ­...">
  <button onclick="procesarEntrada(document.getElementById('userInput').value.trim()); document.getElementById('userInput').value = '';"><strong>Enviar</strong></button>
</div>

<script>
let estado = 'menu';

const urlBuses = "https://uta.cl/buses";
const urlAdaptacion = "https://scanned.page/p/681e2c35aadee";

const menuPrincipal = "Â¿En quÃ© te puedo ayudar?\n1. InformaciÃ³n general de la carrera\n2. Preguntas Frecuentes (FAQ)\n3. Otros\n0. Salir";
const submenuInfoGeneral = "ğŸ“Œ SubmenÃº - InformaciÃ³n General:\n1. Perfil de egreso\n2. Objetivos de la carrera\n3. Ãreas de formaciÃ³n\n.4 Malla Curricular\n0. Volver";
const submenuFAQ = "â“ SubmenÃº - Preguntas Frecuentes:\n1. Licencias MÃ©dicas\n2. Trabajo al egresar\n3. Traslado\n4. Postulaciones\n5. Asignaturas\n6. Becas\n7. Biblioteca\n0. Volver";
const submenuOtros = "ğŸ”§ SubmenÃº - Otros:\n1. Buses de acercamiento\n2. Denuncias y Acoso\n3. Servicio MÃ©dico Estudiantil\n4. AdaptaciÃ³n Regular AcadÃ©mica\n0. Volver";
const submenuPostulaciones = "ğŸ“ SubmenÃº - Postulaciones:\n1. TutorÃ­a Par\n2. CEC\n3. Ayudante de Asignatura\n0. Volver";
const submenuInscripciones = "ğŸ“† SubmenÃº - Asignaturas:\n1. Â¿CuÃ¡ndo debo inscribirme?\n2. Â¿CÃ³mo inscribo las asignaturas?\n3. Â¿Puedo modificar mis asignaturas inscritas?\n4. InscripciÃ³n fuera de plazo\n0. Volver";
const submenuBecas = "ğŸ“ SubmenÃº - Becas:\n1. Beca de Ayuda Solidaria de AlimentaciÃ³n\n2. Beca Fotocopias\n3. Beca Residencia\n4. Beca Complemento BAES\n5. Beca TÃ­tulos y Grados\n6. Beca Internado\n7. Beca PrÃ¡ctica II y PedagogÃ­a\n8. Beca Viaje\n0. Volver";
const submenuBiblioteca = "ğŸ“š SubmenÃº - Biblioteca:\n1. Libros\n2. Box\n3. Impreteca\n4. Tablets\n5. Audiovisuales\n6. Inclusiva\n0. Volver";

const botones = {
  'menu': ['1', '2', '3', '0'],
  'info_general': ['1', '2', '3', '4', '0'],
  'faq': ['1', '2', '3', '4', '5', '6', '7', '0'],
  'otros': ['1', '2', '3', '4', '0'],
  'postulaciones': ['1', '2', '3', '0'],
  'inscripciones': ['1', '2', '3', '4', '0'],
  'becas': ['1', '2', '3', '4', '5', '6', '7', '8', '0'],
  'biblioteca': ['1', '2', '3', '4', '5', '6', '0']
};

function actualizarChat(texto) {
  const chatbox = document.getElementById('chatbox');
  chatbox.innerHTML += `\n${texto}`;
  chatbox.scrollTop = chatbox.scrollHeight;
}

function mostrarQR(url) {
  const chatbox = document.getElementById('chatbox');
  const qr = `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(url)}`;
  chatbox.innerHTML += `\n<img class="qr" src="${qr}" alt="QR">`;
  chatbox.scrollTop = chatbox.scrollHeight;
}

function mostrarBotones(opciones) {
  const container = document.getElementById('buttonsContainer');
  container.innerHTML = '';
  opciones.forEach(op => {
    const btn = document.createElement('button');
    btn.className = 'option-btn';
    btn.innerText = op;
    btn.onclick = () => procesarEntrada(op);
    container.appendChild(btn);
  });
}

function procesarEntrada(entrada) {
  if (!entrada) return;

  switch (estado) {
    case 'menu':
      if (entrada === '1') { estado = 'info_general'; actualizarChat(submenuInfoGeneral); mostrarBotones(botones['info_general']); }
      else if (entrada === '2') { estado = 'faq'; actualizarChat(submenuFAQ); mostrarBotones(botones['faq']); }
      else if (entrada === '3') { estado = 'otros'; actualizarChat(submenuOtros); mostrarBotones(botones['otros']); }
      else if (entrada === '0') { estado = 'finalizado'; actualizarChat("ğŸšª Gracias por usar el chatbot. Â¡Hasta luego!"); mostrarBotones([]); }
      else actualizarChat("âŒ OpciÃ³n invÃ¡lida.");
      break;

    case 'info_general':
      const info = {
        '1': "ğŸ‘¨â€ğŸ“ Perfil de egreso: El Ingeniero Civil Industrial es capaz de gestionar sistemas, optimizar procesos, liderar proyectos y emprender.",
        '2': "ğŸ¯ Objetivos: Crear valor en organizaciones gestionando personas, recursos y tecnologÃ­a.",
        '3': "ğŸ“š Ãreas: Operaciones, proyectos, economÃ­a, logÃ­stica, calidad e innovaciÃ³n."
        '4': "https://ici.uta.cl/wp-content/uploads/2024/05/Malla-ICI-2013-Final-Formal.pdf."
      };
      if (entrada === '0') { estado = 'menu'; actualizarChat(menuPrincipal); mostrarBotones(botones['menu']); return; }
      actualizarChat(info[entrada] || "âŒ OpciÃ³n invÃ¡lida.");
      actualizarChat(submenuInfoGeneral);
      mostrarBotones(botones['info_general']);
      break;

    case 'faq':
      if (entrada === '1') actualizarChat("ğŸ“„ Licencias en SecretarÃ­a de Carrera dentro de 3 dÃ­as.");
      else if (entrada === '2') actualizarChat("ğŸ¢ Puedes trabajar en sector pÃºblico, privado, industria.");
      else if (entrada === '3') { estado = 'postulaciones'; actualizarChat(submenuPostulaciones); mostrarBotones(botones['postulaciones']); return; }
      else if (entrada === '4') { estado = 'postulaciones'; actualizarChat(submenuPostulaciones); mostrarBotones(botones['postulaciones']); return; }
      else if (entrada === '5') { estado = 'inscripciones'; actualizarChat(submenuInscripciones); mostrarBotones(botones['inscripciones']); return; }
      else if (entrada === '6') { estado = 'becas'; actualizarChat(submenuBecas); mostrarBotones(botones['becas']); return; }
      else if (entrada === '7') { estado = 'biblioteca'; actualizarChat(submenuBiblioteca); mostrarBotones(botones['biblioteca']); return; }
      else if (entrada === '0') { estado = 'menu'; actualizarChat(menuPrincipal); mostrarBotones(botones['menu']); return; }
      else actualizarChat("âŒ OpciÃ³n invÃ¡lida.");
      actualizarChat(submenuFAQ);
      mostrarBotones(botones['faq']);
      break;

    case 'postulaciones':
      const post = {
        '1': "ğŸ¤ TutorÃ­a Par: Son Estudiantes guÃ­as que apoyan a sus compaÃ±eros/as en su proceso acadÃ©mico y de adaptaciÃ³n a la universidad. Si desean postular, las convocatorias debes estar atento a este link https://www.instagram.com/formacionintegraluta/.  ",
        '2': "ğŸ‘¥ CEC: Es el Centro de Estudiantes de Carrera organiza actividades promueve la participaciÃ³n estudiantil en la vida academica y comunitaria. Pueden visitar la pagina de instagram https://www.instagram.com/cec_industrial/.",
        '3': "ğŸ§‘â€ğŸ« Ayudante: Al inicio de Semestre DirecciÃ³n de departamento publica la nomina las asignatura que requieren ayudantes, esta sujeto a requisitos cada asignatura."
      };
      if (entrada === '0') { estado = 'faq'; actualizarChat(submenuFAQ); mostrarBotones(botones['faq']); return; }
      actualizarChat(post[entrada] || "âŒ OpciÃ³n invÃ¡lida.");
      actualizarChat(submenuPostulaciones);
      mostrarBotones(botones['postulaciones']);
      break;

    case 'inscripciones':
      const ins = {
        '1': "ğŸ“† Puedes inscribirte segÃºn calendario acadÃ©mico, Primer semestre a mediados de Enero y  Segundo semestre del 23 al 31 de Agosto.",
        '2': "ğŸ’» VÃ­a plataforma acadÃ©mica de la universidad, el link es https://portal.uta.cl/sign-in?redirectURL=%2Fhome.",
        '3': "âœï¸ SegÃºn calendario para el Primer Semestre a finales de Marzo (Esta sujeto a cambios para los proximos aÃ±os), Para el segundo semestre es en mediados de Agosto (Esta sujeto a cambios para los proximos aÃ±os).",
        '4': "â±ï¸ Debes justificar inscripciÃ³n fuera de plazo o contactarse con Jefatura de Carrera."
      };
      if (entrada === '0') { estado = 'faq'; actualizarChat(submenuFAQ); mostrarBotones(botones['faq']); return; }
      actualizarChat(ins[entrada] || "âŒ OpciÃ³n invÃ¡lida.");
      actualizarChat(submenuInscripciones);
      mostrarBotones(botones['inscripciones']);
      break;

    case 'becas':
      const bec = {
        '1': "ğŸ½ï¸ Beca alimentaciÃ³n para alumnos vulnerables, para mas informaciÃ³n https://webdae.uta.cl/index.php/beneficios-complementarios/.",
        '2': "ğŸ–¨ï¸ Fotocopias disponibles en centros autorizados, para mas informaciÃ³n https://webdae.uta.cl/index.php/beneficios-complementarios/.",
        '3': "ğŸ  Residencia para estudiantes sin alojamiento en Arica, para mas informaciÃ³n https://webdae.uta.cl/index.php/beneficios-complementarios/.",
        '4': "ğŸ’³ Es el Complemento para BAES insuficiente, para mas informaciÃ³n https://webdae.uta.cl/index.php/beneficios-complementarios/.",
        '5': "ğŸ“œ Es un apoyo econÃ³mico para tÃ­tulos y grados, para mas informaciÃ³n https://webdae.uta.cl/index.php/beneficios-complementarios/.",
        '6': "ğŸ¥ Beca para internos en etapa final, para mas informaciÃ³n https://webdae.uta.cl/index.php/beneficios-complementarios/.",
        '7': "ğŸ§‘â€ğŸ« Es un apoyo a prÃ¡cticas en pedagogÃ­a, para mas informaciÃ³n https://webdae.uta.cl/index.php/beneficios-complementarios/.",
        '8': "ğŸšŒ Es una ayuda para viajes acadÃ©micos, para mas informaciÃ³n https://webdae.uta.cl/index.php/beneficios-complementarios/."
      };
      if (entrada === '0') { estado = 'faq'; actualizarChat(submenuFAQ); mostrarBotones(botones['faq']); return; }
      actualizarChat(bec[entrada] || "âŒ OpciÃ³n invÃ¡lida.");
      actualizarChat(submenuBecas);
      mostrarBotones(botones['becas']);
      break;

    case 'biblioteca':
      const bib = {
        '1': "ğŸ“š Acceso a libros fÃ­sicos y digitales, para mas informaciÃ³n http://sb.uta.cl/sbuta/prestamos-y-servicios/.",
        '2': "ğŸ“– Reservas de salas tipo box, para mas informaciÃ³n http://sb.uta.cl/sbuta/prestamos-y-servicios/.",
        '3': "ğŸ–¨ï¸ Servicio de impresiÃ³n acadÃ©mica, para mas informaciÃ³n http://sb.uta.cl/sbuta/prestamos-y-servicios/.",
        '4': "ğŸ“± PrÃ©stamo de tablets e iPads, para mas informaciÃ³n http://sb.uta.cl/sbuta/prestamos-y-servicios/.",
        '5': "ğŸ¥ Material audiovisual disponible, para mas informaciÃ³n http://sb.uta.cl/sbuta/prestamos-y-servicios/.",
        '6': "ğŸ§ Recursos para inclusiÃ³n y diversidad, para mas informaciÃ³n http://sb.uta.cl/sbuta/prestamos-y-servicios/."
      };
      if (entrada === '0') { estado = 'faq'; actualizarChat(submenuFAQ); mostrarBotones(botones['faq']); return; }
      actualizarChat(bib[entrada] || "âŒ OpciÃ³n invÃ¡lida.");
      actualizarChat(submenuBiblioteca);
      mostrarBotones(botones['biblioteca']);
      break;

    case 'otros':
      if (entrada === '1') { actualizarChat("ğŸšŒ Consulta los horarios y paradas de buses de acercamiento:"); mostrarQR(urlBuses); }
      else if (entrada === '2') actualizarChat("ğŸš¨ Las denuncias se pueden realizar en la DirecciÃ³n de GÃ©nero, para mas informaciÃ³n de formularios https://www.uta.cl/index.php/deygen/.");
      else if (entrada === '3') actualizarChat("ğŸ¥ Servicio mÃ©dico disponible con tu TUI. Horario: 8:00 a 17:00 hrs.");
      else if (entrada === '4') { actualizarChat("ğŸ“˜ AdaptaciÃ³n acadÃ©mica se solicita con respaldo mÃ©dico o psicolÃ³gico para los alumnos:"); mostrarQR(urlAdaptacion); }
      else if (entrada === '0') { estado = 'menu'; actualizarChat(menuPrincipal); mostrarBotones(botones['menu']); return; }
      else actualizarChat("âŒ OpciÃ³n invÃ¡lida.");
      actualizarChat(submenuOtros);
      mostrarBotones(botones['otros']);
      break;

    case 'finalizado':
      actualizarChat("ğŸš« Chat finalizado. Recarga para comenzar de nuevo.");
      break;

    default:
      actualizarChat("âš ï¸ Estado desconocido.");
      break;
  }
}

window.onload = () => {
  mostrarBotones(botones['menu']);
  document.getElementById("userInput").addEventListener("keypress", function (e) {
    if (e.key === "Enter") {
      procesarEntrada(this.value.trim());
      this.value = '';
    }
  });
};
</script>

</body>
</html>
