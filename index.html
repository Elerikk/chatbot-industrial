<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>ChatBot Ingenier√≠a Civil Industrial</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f2f2f2;
      padding: 20px;
    }
    #chatbox {
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 10px;
      padding: 15px;
      max-width: 500px;
      height: 400px;
      overflow-y: auto;
      white-space: pre-line;
    }
    .buttons-container {
      margin-top: 10px;
    }
    .option-btn {
      padding: 10px 20px;
      margin: 5px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      background-color: #007bff;
      color: white;
    }
    #manualInput {
      margin-top: 10px;
    }
    #manualInput input {
      padding: 10px;
      font-size: 16px;
      width: 300px;
    }
    #manualInput button {
      padding: 10px;
      font-size: 16px;
      margin-left: 10px;
    }
  </style>
</head>
<body>

<h2>Bienvenido al ChatBot de Ingenier√≠a Civil Industrial üë∑‚Äç‚ôÇÔ∏è</h2>
<div id="chatbox">¬øEn qu√© te puedo ayudar?
1. Informaci√≥n general de la carrera  
2. Preguntas Frecuentes (FAQ)  
3. Otros  
4. Salir
</div>

<div class="buttons-container" id="buttonsContainer"></div>

<div id="manualInput">
  <input type="text" id="userInput" placeholder="Escribe el n√∫mero de opci√≥n aqu√≠...">
  <button onclick="procesarEntrada(document.getElementById('userInput').value.trim()); document.getElementById('userInput').value = '';">Enviar</button>
</div>

<script>
let estado = 'menu';

const urlAdaptacion = "https://scanned.page/p/681e2c35aadee";
const urlBuses = "https://uta.cl/buses";

const menuPrincipal = "¬øEn qu√© te puedo ayudar?\n1. Informaci√≥n general de la carrera\n2. Preguntas Frecuentes (FAQ)\n3. Otros\n4. Salir";
const submenuInfoGeneral = "üìå Submen√∫ - Informaci√≥n General:\n1. Perfil de egreso\n2. Objetivos de la carrera\n3. √Åreas de formaci√≥n\n0. Volver";
const submenuFAQ = "‚ùì Submen√∫ - Preguntas Frecuentes:\n1. Licencias M√©dicas\n2. Trabajo al egresar\n3. Traslado\n4. Postulaciones\n5. Inscripciones\n6. Becas\n7. Biblioteca\n0. Volver";
const submenuOtros = "üîß Submen√∫ - Otros:\n1. Buses de acercamiento\n2. Denuncias y Acoso\n3. Servicio M√©dico Estudiantil\n4. Adaptaci√≥n Regular Acad√©mica\n5. Reincorporaci√≥n a la carrera\n0. Volver al men√∫ principal";

const submenuTraslado = "üîÑ Submen√∫ - Traslado:\n1. Cambio de carrera\n2. Cambio de sede\n3. Cambio de instituci√≥n\n0. Volver";
const submenuPostulaciones = "üìù Submen√∫ - Postulaciones:\n1. Ayudant√≠as\n2. Tutor√≠as pares\n3. Representaci√≥n estudiantil\n0. Volver";
const submenuInscripciones = "üìÜ Submen√∫ - Inscripciones:\n1. Asignaturas\n2. Modificaci√≥n de ramos\n3. Inscripci√≥n fuera de plazo\n0. Volver";
const submenuBecas = "üéì Submen√∫ - Becas:\n1. Beca de alimentaci√≥n\n2. Beca de residencia\n3. Beca de excelencia\n0. Volver";
const submenuBiblioteca = "üìö Submen√∫ - Biblioteca:\n1. Pr√©stamo de libros\n2. Acceso a bases de datos\n3. Sala de estudio\n0. Volver";

const botones = {
  'menu': ['1', '2', '3', '4'],
  'info_general': ['1', '2', '3', '0'],
  'faq': ['1', '2', '3', '4', '5', '6', '7', '0'],
  'otros': ['1', '2', '3', '4', '5', '0'],
  'traslado': ['1', '2', '3', '0'],
  'postulaciones': ['1', '2', '3', '0'],
  'inscripciones': ['1', '2', '3', '0'],
  'becas': ['1', '2', '3', '0'],
  'biblioteca': ['1', '2', '3', '0']
};

function actualizarChat(texto) {
  const chatbox = document.getElementById('chatbox');
  chatbox.innerHTML += `\n${texto}`;
  chatbox.scrollTop = chatbox.scrollHeight;
}

function mostrarBotones(opciones) {
  const container = document.getElementById('buttonsContainer');
  container.innerHTML = '';
  opciones.forEach(op => {
    const btn = document.createElement('button');
    btn.className = 'option-btn';
    btn.innerText = op;
    btn.onclick = () => procesarEntrada(op);
    container.appendChild(btn);
  });
}

function procesarEntrada(entrada) {
  if (!entrada) return;
  switch (estado) {
    case 'menu':
      if (entrada === '1') { estado = 'info_general'; actualizarChat(submenuInfoGeneral); mostrarBotones(botones['info_general']); }
      else if (entrada === '2') { estado = 'faq'; actualizarChat(submenuFAQ); mostrarBotones(botones['faq']); }
      else if (entrada === '3') { estado = 'otros'; actualizarChat(submenuOtros); mostrarBotones(botones['otros']); }
      else if (entrada === '4') { estado = 'finalizado'; actualizarChat("üö™ Gracias por usar el chatbot. ¬°Hasta luego!"); mostrarBotones([]); }
      else actualizarChat("‚ùå Opci√≥n inv√°lida.");
      break;

    case 'faq':
      if (entrada === '1') actualizarChat("üìÑ Licencias en Secretar√≠a de Carrera dentro de 3 d√≠as.");
      else if (entrada === '2') actualizarChat("üè¢ Puedes trabajar en sector p√∫blico, privado, industria.");
      else if (entrada === '3') { estado = 'traslado'; actualizarChat(submenuTraslado); mostrarBotones(botones['traslado']); return; }
      else if (entrada === '4') { estado = 'postulaciones'; actualizarChat(submenuPostulaciones); mostrarBotones(botones['postulaciones']); return; }
      else if (entrada === '5') { estado = 'inscripciones'; actualizarChat(submenuInscripciones); mostrarBotones(botones['inscripciones']); return; }
      else if (entrada === '6') { estado = 'becas'; actualizarChat(submenuBecas); mostrarBotones(botones['becas']); return; }
      else if (entrada === '7') { estado = 'biblioteca'; actualizarChat(submenuBiblioteca); mostrarBotones(botones['biblioteca']); return; }
      else if (entrada === '0') { estado = 'menu'; actualizarChat(menuPrincipal); mostrarBotones(botones['menu']); return; }
      else actualizarChat("‚ùå Opci√≥n inv√°lida.");
      actualizarChat(submenuFAQ); mostrarBotones(botones['faq']);
      break;

    default:
      if (botones[estado] && entrada === '0') {
        estado = 'faq';
        actualizarChat(submenuFAQ);
        mostrarBotones(botones['faq']);
      } else {
        actualizarChat("‚úÖ Gracias. Puedes seguir navegando el submen√∫ o volver con opci√≥n 0.");
        mostrarBotones(botones[estado] || []);
      }
      break;
  }
}

window.onload = () => {
  mostrarBotones(botones['menu']);
  document.getElementById("userInput").addEventListener("keypress", function (e) {
    if (e.key === "Enter") {
      procesarEntrada(this.value.trim());
      this.value = '';
    }
  });
};
</script>

</body>
</html>
