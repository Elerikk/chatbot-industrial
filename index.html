<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>ChatBot IngenierÃ­a Civil Industrial</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f2f2f2;
      padding: 20px;
    }
    #chatbox {
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 10px;
      padding: 15px;
      max-width: 500px;
      height: 400px;
      overflow-y: auto;
      white-space: pre-line;
    }
    .buttons-container {
      margin-top: 10px;
    }
    .option-btn {
      padding: 10px 20px;
      margin: 5px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      background-color: #007bff;
      color: white;
    }
    #manualInput {
      margin-top: 10px;
    }
    #manualInput input {
      padding: 10px;
      font-size: 16px;
      width: 300px;
    }
    #manualInput button {
      padding: 10px;
      font-size: 16px;
      margin-left: 10px;
    }
    img.qr {
      margin-top: 10px;
      width: 150px;
    }
  </style>
</head>
<body>

<h2>Bienvenido al ChatBot de IngenierÃ­a Civil Industrial ğŸ‘·â€â™‚ï¸</h2>
<div id="chatbox">Â¿En quÃ© te puedo ayudar?
1. InformaciÃ³n general de la carrera  
2. Preguntas Frecuentes (FAQ)  
3. Otros  
4. Nosotros
0. Salir</div>

<div class="buttons-container" id="buttonsContainer"></div>

<div id="manualInput">
  <input type="text" id="userInput" placeholder="Escribe el nÃºmero de opciÃ³n aquÃ­...">
  <button onclick="procesarEntrada(document.getElementById('userInput').value.trim()); document.getElementById('userInput').value = '';"><strong>Enviar</strong></button>
</div>

<script>
let estado = 'menu';

const urlBuses = "https://uta.cl/buses";
const urlAdaptacion = "https://scanned.page/p/681e2c35aadee";

const menuPrincipal = "Â¿En quÃ© te puedo ayudar?\n1. InformaciÃ³n general de la carrera\n2. Preguntas Frecuentes (FAQ)\n3. Otros\n4. Nosotros\n0. Salir";
const submenuInfoGeneral = "ğŸ“Œ SubmenÃº - InformaciÃ³n General:\n1. Perfil de egreso\n2. Objetivos de la carrera\n3. Ãreas de formaciÃ³n\n0. Volver";
const submenuFAQ = "â“ SubmenÃº - Preguntas Frecuentes:\n1. Licencias MÃ©dicas\n2. Trabajo al egresar\n3. Traslado\n4. Postulaciones\n5. Asignaturas\n6. Becas\n7. Biblioteca\n0. Volver";
const submenuOtros = "ğŸ”§ SubmenÃº - Otros:\n1. Buses de acercamiento\n2. Denuncias y Acoso\n3. Servicio MÃ©dico Estudiantil\n4. AdaptaciÃ³n Regular AcadÃ©mica\n0. Volver";
const submenuPostulaciones = "ğŸ“ SubmenÃº - Postulaciones:\n1. TutorÃ­a Par\n2. CEC\n3. Ayudante de Asignatura\n0. Volver";
const submenuInscripciones = "ğŸ“† SubmenÃº - Asignaturas:\n1. Â¿CuÃ¡ndo debo inscribirme?\n2. Â¿CÃ³mo inscribo las asignaturas?\n3. Â¿Puedo modificar mis asignaturas inscritas?\n4. InscripciÃ³n fuera de plazo\n0. Volver";
const submenuBecas = "ğŸ“ SubmenÃº - Becas:\n1. Beca de Ayuda Solidaria de AlimentaciÃ³n\n2. Beca Fotocopias\n3. Beca Residencia\n4. Beca Complemento BAES\n5. Beca TÃ­tulos y Grados\n6. Beca Internado\n7. Beca PrÃ¡ctica II y PedagogÃ­a\n8. Beca Viaje\n0. Volver";
const submenuBiblioteca = "ğŸ“š SubmenÃº - Biblioteca:\n1. Libros\n2. Box\n3. Impreteca\n4. Tablets\n5. Audiovisuales\n6. Inclusiva\n0. Volver";
const submenuTraslado = "ğŸ”„SubmenÃº - Traslado:\n1. De carrera\n2. De instituciÃ³n\n3. De Casa de estudio\n0. Volver";
const submenuNosotros = "ğŸ‘¥ Nosotros:\n1. AcadÃ©micos\n2. Profesionales de Apoyo\n3. Secretarias\n0. Volver";
const submenuAcademicos = "ğŸ‘¨â€ğŸ« AcadÃ©micos:\n1. Liliana Pedraja Rejas\n2. Diego Villagra Gil\n3. Gregorio Paz Segura\n4. Gonzalo ValdÃ©s GonzÃ¡lez\n5. David Catari Vargas\n6. Hernando Bustos Andreu\n7. Carmen Araneda Guirriman\n8. Italo Marchioni Choque\n9. Laura PerÃ©z Fuentes\n10. Amir Karbassi Yazdi\n11. Giuliani Coluccio PiÃ±ones\n0. Volver";
const submenuProfesionales = "ğŸ§‘â€ğŸ’¼ Profesionales de Apoyo:\n1. Sebastian Gonzalez Aguilera\n2. Vania Quezada Lara\n0. Volver";
const submenuSecretarias = "ğŸ“  Secretarias:\n1. Karen Ibarra Jara\n2. Susana Viveros Flores\n3. Elida Huanca Pairo\n0. Volver";

const botones = {
  'menu': ['1', '2', '3', '4', '0'],
  'info_general': ['1', '2', '3', '0'],
  'faq': ['1', '2', '3', '4', '5', '6', '7', '0'],
  'otros': ['1', '2', '3', '4', '0'],
  'postulaciones': ['1', '2', '3', '0'],
  'inscripciones': ['1', '2', '3', '4', '0'],
  'becas': ['1', '2', '3', '4', '5', '6', '7', '8', '0'],
  'biblioteca': ['1', '2', '3', '4', '5', '6', '0'],
  'traslado': ['1', '2', '3', '0'],
  'nosotros': ['1', '2', '3', '0'],
  'academicos': ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11'],
  'profesionales': ['1', '2', '0'],
  'secretarias': ['1', '2', '3', '0']  
};

function actualizarChat(texto) {
  const chatbox = document.getElementById('chatbox');
  chatbox.innerHTML += `<p>${texto}</p>`;
  chatbox.scrollTop = chatbox.scrollHeight;
}

function mostrarQR(url) {
  const chatbox = document.getElementById('chatbox');
  const qr = `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(url)}`;
  chatbox.innerHTML += `\n<img class="qr" src="${qr}" alt="QR">`;
  chatbox.scrollTop = chatbox.scrollHeight;
}

function mostrarBotones(opciones) {
  const container = document.getElementById('buttonsContainer');
  container.innerHTML = '';
  opciones.forEach(op => {
    const btn = document.createElement('button');
    btn.className = 'option-btn';
    btn.innerText = op;
    btn.onclick = () => procesarEntrada(op);
    container.appendChild(btn);
  });
}

function procesarEntrada(entrada) {
  if (!entrada) return;

  switch (estado) {
    case 'menu':
      if (entrada === '1') { estado = 'info_general'; actualizarChat(submenuInfoGeneral); mostrarBotones(botones['info_general']); }
      else if (entrada === '2') { estado = 'faq'; actualizarChat(submenuFAQ); mostrarBotones(botones['faq']); }
      else if (entrada === '3') { estado = 'otros'; actualizarChat(submenuOtros); mostrarBotones(botones['otros']); }
      else if (entrada === '4') { estado = 'nosotros'; actualizarChat(submenuNosotros); mostrarBotones(botones['nosotros']); }
      else if (entrada === '0') { estado = 'finalizado'; actualizarChat("ğŸšª Gracias por usar el chatbot. Â¡Hasta luego!"); mostrarBotones([]); }
      else actualizarChat("âŒ OpciÃ³n invÃ¡lida.");
      break;

    case 'info_general':
      const info = {
        '1': "ğŸ‘¨â€ğŸ“ Perfil de egreso: El Ingeniero Civil Industrial es capaz de gestionar sistemas, optimizar procesos, liderar proyectos y emprender.",
        '2': "ğŸ¯ Objetivos: Formar profesionales capaces de integrar personas, recursos y tecnologÃ­a, con habilidades para tomar decisiones y gestionar estratÃ©gicamente en organizaciones.",
        '3': "ğŸ“š Ãreas: Operaciones, Proyectos, EconomÃ­a, LogÃ­stica, Calidad e InnovaciÃ³n."
      };
      if (entrada === '0') { estado = 'menu'; actualizarChat(menuPrincipal); mostrarBotones(botones['menu']); return; }
      actualizarChat(info[entrada] || "âŒ OpciÃ³n invÃ¡lida.");
      actualizarChat(submenuInfoGeneral);
      mostrarBotones(botones['info_general']);
      break;

    case 'faq':
      if (entrada === '1') actualizarChat("ğŸ“„ Licencias en SecretarÃ­a de Carrera dentro de 3 dÃ­as.");
      else if (entrada === '2') actualizarChat("ğŸ¢ Puedes trabajar en sector pÃºblico, privado, industria.");
      else if (entrada === '3') { estado = 'traslado'; actualizarChat(submenuTraslado); mostrarBotones(botones['traslado']); return; }
      else if (entrada === '4') { estado = 'postulaciones'; actualizarChat(submenuPostulaciones); mostrarBotones(botones['postulaciones']); return; }
      else if (entrada === '5') { estado = 'inscripciones'; actualizarChat(submenuInscripciones); mostrarBotones(botones['inscripciones']); return; }
      else if (entrada === '6') { estado = 'becas'; actualizarChat(submenuBecas); mostrarBotones(botones['becas']); return; }
      else if (entrada === '7') { estado = 'biblioteca'; actualizarChat(submenuBiblioteca); mostrarBotones(botones['biblioteca']); return; }
      else if (entrada === '0') { estado = 'menu'; actualizarChat(menuPrincipal); mostrarBotones(botones['menu']); return; }
      else actualizarChat("âŒ OpciÃ³n invÃ¡lida.");
      actualizarChat(submenuFAQ);
      mostrarBotones(botones['faq']);
      break;
      
    case 'postulaciones':
      const post = {
        '1': "ğŸ¤ TutorÃ­a Par: Estudiantes guÃ­as que apoyan a sus compaÃ±eros/as en su proceso acadÃ©mico y de adaptaciÃ³n. Convocatorias en: <a href='https://www.instagram.com/formacionintegraluta/' target='_blank'>@formacionintegraluta</a>.",
        '2': "ğŸ‘¥ CEC: El Centro de Estudiantes de Carrera organiza actividades y representa a los estudiantes. MÃ¡s info en: <a href='https://www.instagram.com/cec_industrial/' target='_blank'>@cec_industrial</a>.",
        '3': "ğŸ§‘â€ğŸ« Ayudante: Estudiante que resuelve dudas de la asignatura, al inicio del semestre, el Departamento publica las asignaturas que requieren ayudantes. Cada una tiene requisitos especÃ­ficos."
      };
      if (entrada === '0') { estado = 'faq'; actualizarChat(submenuFAQ); mostrarBotones(botones['faq']); return; }
      actualizarChat(post[entrada] || "âŒ OpciÃ³n invÃ¡lida.");
      actualizarChat(submenuPostulaciones);
      mostrarBotones(botones['postulaciones']);
      break;

    case 'traslado':
      const traslado = {
        '1': "ğŸ“ El traslado entre sedes debe ser solicitado en SecretarÃ­a de Estudios. Requiere justificaciÃ³n acadÃ©mica o personal.",
        '2': "ğŸ“„ Debes presentar una carta formal explicando los motivos del traslado y adjuntar los respaldos necesarios.",
        '3': "â³ El proceso de evaluaciÃ³n puede demorar hasta 15 dÃ­as hÃ¡biles. RecibirÃ¡s una notificaciÃ³n por correo institucional.",
      };
      if (entrada === '0') { estado = 'faq'; actualizarChat(submenuFAQ); mostrarBotones(botones['faq']); return;}
      actualizarChat(traslado[entrada] || "âŒ OpciÃ³n invÃ¡lida.");
      actualizarChat(submenuTraslado);
      mostrarBotones(botones['traslado']);
      break;
      
    case 'inscripciones':
      const ins = {
        '1': "ğŸ“† InscripciÃ³n segÃºn calendario acadÃ©mico: primer semestre a mediados de enero y segundo semestre del 23 al 31 de agosto.",
        '2': "ğŸ’» Se realiza vÃ­a plataforma acadÃ©mica de la universidad: <a href='https://portal.uta.cl/sign-in?redirectURL=%2Fhome' target='_blank'>portal.uta.cl</a>.",
        '3': "âœï¸ Modificaciones segÃºn calendario: primer semestre a fines de marzo, segundo semestre a mediados de agosto (fechas pueden variar).",
        '4': "â±ï¸ InscripciÃ³n fuera de plazo requiere justificaciÃ³n o contacto con Jefatura de Carrera."
      };
      if (entrada === '0') { estado = 'faq'; actualizarChat(submenuFAQ); mostrarBotones(botones['faq']); return; }
      actualizarChat(ins[entrada] || "âŒ OpciÃ³n invÃ¡lida.");
      actualizarChat(submenuInscripciones);
      mostrarBotones(botones['inscripciones']);
      break;

    case 'becas':
      const bec = {
        '1': "ğŸ½ï¸ Beca alimentaciÃ³n para alumnos vulnerables. MÃ¡s info: <a href='https://webdae.uta.cl/index.php/beneficios-complementarios/' target='_blank'>webdae.uta.cl</a>",
        '2': "ğŸ–¨ï¸ Fotocopias disponibles en centros autorizados. MÃ¡s info: <a href='https://webdae.uta.cl/index.php/beneficios-complementarios/' target='_blank'>webdae.uta.cl</a>",
        '3': "ğŸ  Residencia para estudiantes sin alojamiento en Arica. MÃ¡s info: <a href='https://webdae.uta.cl/index.php/beneficios-complementarios/' target='_blank'>webdae.uta.cl</a>",
        '4': "ğŸ’³ Complemento para BAES insuficiente. MÃ¡s info: <a href='https://webdae.uta.cl/index.php/beneficios-complementarios/' target='_blank'>webdae.uta.cl</a>",
        '5': "ğŸ“œ Apoyo econÃ³mico para tÃ­tulos y grados. MÃ¡s info: <a href='https://webdae.uta.cl/index.php/beneficios-complementarios/' target='_blank'>webdae.uta.cl</a>",
        '6': "ğŸ¥ Beca para internos en etapa final. MÃ¡s info: <a href='https://webdae.uta.cl/index.php/beneficios-complementarios/' target='_blank'>webdae.uta.cl</a>",
        '7': "ğŸ§‘â€ğŸ« Apoyo a prÃ¡cticas en pedagogÃ­a. MÃ¡s info: <a href='https://webdae.uta.cl/index.php/beneficios-complementarios/' target='_blank'>webdae.uta.cl</a>",
        '8': "ğŸšŒ Ayuda para viajes acadÃ©micos. MÃ¡s info: <a href='https://webdae.uta.cl/index.php/beneficios-complementarios/' target='_blank'>webdae.uta.cl</a>"
      };
      if (entrada === '0') { estado = 'faq'; actualizarChat(submenuFAQ); mostrarBotones(botones['faq']); return; }
      actualizarChat(bec[entrada] || "âŒ OpciÃ³n invÃ¡lida.");
      actualizarChat(submenuBecas);
      mostrarBotones(botones['becas']);
      break;

    case 'biblioteca':
      const bib = {
        '1': "ğŸ“š Acceso a libros fÃ­sicos y digitales. MÃ¡s info: <a href='http://sb.uta.cl/sbuta/prestamos-y-servicios/' target='_blank'>sb.uta.cl</a>.",
        '2': "ğŸ“– Reserva de salas tipo box. MÃ¡s info: <a href='http://sb.uta.cl/sbuta/prestamos-y-servicios/' target='_blank'>sb.uta.cl</a>.",
        '3': "ğŸ–¨ï¸ Servicio de impresiÃ³n acadÃ©mica. MÃ¡s info: <a href='http://sb.uta.cl/sbuta/prestamos-y-servicios/' target='_blank'>sb.uta.cl</a>.",
        '4': "ğŸ“± PrÃ©stamo de tablets e iPads. MÃ¡s info: <a href='http://sb.uta.cl/sbuta/prestamos-y-servicios/' target='_blank'>sb.uta.cl</a>.",
        '5': "ğŸ¥ Material audiovisual disponible en salas multimedia. MÃ¡s info: <a href='http://sb.uta.cl/sbuta/prestamos-y-servicios/' target='_blank'>sb.uta.cl</a>.",
        '6': "ğŸ§ Sala con recursos para inclusiÃ³n y diversidad. MÃ¡s info: <a href='http://sb.uta.cl/sbuta/prestamos-y-servicios/' target='_blank'>sb.uta.cl</a>."
      };
      if (entrada === '0') { estado = 'faq'; actualizarChat(submenuFAQ); mostrarBotones(botones['faq']); return; }
      actualizarChat(bib[entrada] || "âŒ OpciÃ³n invÃ¡lida.");
      actualizarChat(submenuBiblioteca);
      mostrarBotones(botones['biblioteca']);
      break;

    case 'otros':
      if (entrada === '1') { actualizarChat("ğŸšŒ Consulta los horarios y paradas de buses de acercamiento:"); mostrarQR(urlBuses); }
      else if (entrada === '2') actualizarChat("ğŸš¨ Las denuncias se pueden realizar en la DirecciÃ³n de GÃ©nero.");
      else if (entrada === '3') actualizarChat("ğŸ¥ Servicio mÃ©dico disponible con tu TUI. Horario: 8:00 a 17:00 hrs.");
      else if (entrada === '4') { actualizarChat("ğŸ“˜ AdaptaciÃ³n acadÃ©mica se solicita con respaldo mÃ©dico o psicolÃ³gico:"); mostrarQR(urlAdaptacion); }
      else if (entrada === '0') { estado = 'menu'; actualizarChat(menuPrincipal); mostrarBotones(botones['menu']); return; }
      else actualizarChat("âŒ OpciÃ³n invÃ¡lida.");
      actualizarChat(submenuOtros);
      mostrarBotones(botones['otros']);
      break;
      
    case 'nosotros':
      if (entrada === '1') { estado = 'academicos'; actualizarChat(submenuAcademicos); mostrarBotones(['1','2','3','4','5','6','7','8','9','10','11','0']); }
      else if (entrada === '2') { estado = 'profesionales'; actualizarChat(submenuProfesionales); mostrarBotones(['1','2','0']); }
      else if (entrada === '3') { estado = 'secretarias'; actualizarChat(submenuSecretarias); mostrarBotones(['1','2','3','0']); }
      else if (entrada === '0') { estado = 'menu'; actualizarChat(menuPrincipal); mostrarBotones(['1','2','3','4','0']); }
      break;

    case 'academicos':
      const horariosAcademicos = {
        '1': "ğŸ•’ Liliana Pedraja Rejas atiende de lunes a viernes de 10:00 a 12:00 hrs.",
        '2': "ğŸ•’ Diego Villagra Gil atiende de lunes a viernes de 10:00 a 12:00 hrs.",
        '3': "ğŸ•’ Gregorio Paz Segura atiende de lunes a viernes de 10:00 a 12:00 hrs.",
        '4': "ğŸ•’ Gonzalo ValdÃ©s GonzÃ¡lez atiende de lunes a viernes de 10:00 a 12:00 hrs.",
        '5': "ğŸ•’ David Catari Vargas atiende de lunes a viernes de 10:00 a 12:00 hrs.",
        '6': "ğŸ•’ Hernando Bustos Andreu atiende de lunes a viernes de 10:00 a 12:00 hrs.",
        '7': "ğŸ•’ Carmen Araneda Guirriman atiende miercoles de 11:20 a 12:50 hrs.",
        '8': "ğŸ•’ Italo Marchioni Choque atiende de lunes a viernes de 10:00 a 12:00 hrs.",
        '9': "ğŸ•’ Laura PerÃ©z Fuentes atiende de lunes a viernes de 10:00 a 12:00 hrs.",
        '10': "ğŸ•’ Amir Karbassi Yazdi atiende de lunes a viernes de 15:30 a 16:15 hrs.",
        '11': "ğŸ•’ Giuliani Coluccio PiÃ±ones atiende de lunes a viernes de 10:00 a 12:00 hrs."
      };
      if (entrada === '0') { estado = 'nosotros'; actualizarChat(submenuNosotros); mostrarBotones(['1','2','3','0']); return; }
      actualizarChat(horariosAcademicos[entrada] || "âŒ OpciÃ³n invÃ¡lida.");
      break;

    case 'profesionales':
      if (entrada === '1') actualizarChat("ğŸ•’ SebastiÃ¡n Gonzalez Aguilera atiende los lunes y miÃ©rcoles de 9:00 a 13:00 hrs.");
      else if (entrada === '2') actualizarChat("ğŸ•’ Vania Quezada Lara atiende los martes y jueves de 10:00 a 14:00 hrs.");
      else if (entrada === '0') { estado = 'nosotros'; actualizarChat(submenuNosotros); mostrarBotones(['1','2','3','0']); }
      break;

    case 'secretarias':
      if (entrada === '1') actualizarChat("ğŸ•’ Karen Ibarra Jara atiende de 9:00 a 13:00 hrs. ğŸ“§ karen.ibarra@uta.cl");
      else if (entrada === '2') actualizarChat("ğŸ•’ Susana Viveros Flores atiende de 10:00 a 14:00 hrs. ğŸ“§ susana.viveros@uta.cl");
      else if (entrada === '3') actualizarChat("ğŸ•’ Elida Huanca Pairo atiende de 11:00 a 15:00 hrs. ğŸ“§ elida.huanca@uta.cl");
      else if (entrada === '0') { estado = 'nosotros'; actualizarChat(submenuNosotros); mostrarBotones(['1','2','3','0']); }
      break;

    case 'finalizado':
      actualizarChat("ğŸš« Chat finalizado. Recarga para comenzar de nuevo.");
      break;

    default:
      actualizarChat("âš ï¸ Estado desconocido.");
      break;
  }
}

window.onload = () => {
  mostrarBotones(botones['menu']);
  document.getElementById("userInput").addEventListener("keypress", function (e) {
    if (e.key === "Enter") {
      procesarEntrada(this.value.trim());
      this.value = '';
    }
  });
};
</script>

</body>
</html>
